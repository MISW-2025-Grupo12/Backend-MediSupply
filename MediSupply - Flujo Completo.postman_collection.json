{
	"info": {
		"_postman_id": "28eeee66-2db1-4bb8-9563-ba165006958f",
		"name": "MediSupply - Flujo Completo",
		"description": "**MISO GRUPO 12:**\n\n- Manuel Sanchez\n    \n- Jairo Reyes\n    \n- Nicolas Malagon\n    \n- Sergio Perez\n    \n\nColecci√≥n completa de endpoints para MediSupply con flujo de ejecuci√≥n autom√°tico.\n\n## üèóÔ∏è Arquitectura\n\nEl sistema est√° compuesto por 5 microservicios:\n\n- **Auth-Service** (Puerto 5004) - Autenticaci√≥n centralizada con JWT y autorizaci√≥n basada en roles\n    \n- **Usuarios** (Puerto 5001) - Gesti√≥n de proveedores, vendedores, clientes, administradores y repartidores\n    \n- **Productos** (Puerto 5000) - Cat√°logo de productos y categor√≠as\n    \n- **Ventas** (Puerto 5002) - Gesti√≥n de planes de visitas, visitas y pedidos\n    \n- **Log√≠stica** (Puerto 5003) - Control de inventario, entregas y bodegas\n    \n- **Nginx Gateway** (Puerto 8080) - API Gateway con autenticaci√≥n y enrutamiento\n    \n\n## üöÄ Requisitos\n\n- Docker y Docker Compose\n    \n- Python 3.9+\n    \n- PostgreSQL 15\n    \n\n## üê≥ Ejecuci√≥n\n\n``` bash\ndocker-compose up -d\n\n ```\n\n## üîí Acceso a los Servicios\n\n**IMPORTANTE:** Todos los requests deben ir a trav√©s del Nginx Gateway en el puerto 8080.\n\n- Gateway (USAR ESTE): `http://localhost:8080`\n    \n- Login: `http://localhost:8080/auth/login`\n    \n- Usuarios: `http://localhost:8080/usuarios/...`\n    \n- Productos: `http://localhost:8080/productos/...`\n    \n- Ventas: `http://localhost:8080/ventas/...`\n    \n- Log√≠stica: `http://localhost:8080/logistica/...`\n\n## üìã Flujo de Ejecuci√≥n\n\n1. **Configuraci√≥n Inicial** - Verificar servicios\n    \n2. **Autenticaci√≥n JWT** - Registrar usuarios y obtener tokens (vendedores, clientes, proveedores)\n    \n3. **Crear Entidades Base** - Proveedores, Categor√≠as, Vendedores, Clientes\n    \n4. **Crear Productos** - Con y sin inventario\n    \n5. **Crear Planes y Visitas** - Crear planes de visitas (que generan visitas autom√°ticamente) y visitas individuales\n    \n6. **Crear Pedidos** - Con items y confirmaci√≥n (incluye pedido completo)\n    \n7. **Gestionar Inventario** - Reservas y descuentos\n    \n8. **Gestionar Bodegas** - Inicializar y consultar ubicaciones\n    \n9. **Consultar Entregas** - Ver entregas programadas\n    \n10. **Informes de Ventas** - Consultar datos de ventas por vendedor y fechas",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "30409960",
		"_collection_link": "https://drones-8622.postman.co/workspace/CloudOps-MISO~6e478cc9-85ca-4be0-88ce-7294df068b85/collection/30409960-28eeee66-2db1-4bb8-9563-ba165006958f?action=share&source=collection_link&creator=30409960"
	},
	"item": [
		{
			"name": "üîß 1. Configuraci√≥n Inicial",
			"item": [
				{
					"name": "Health Check - Usuarios",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Servicio de Usuarios est√° funcionando', function () {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json();",
									"    pm.expect(response.status).to.eql('up');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_usuarios}}/health",
							"host": [
								"{{base_url_usuarios}}"
							],
							"path": [
								"health"
							]
						},
						"description": "Verifica el estado del microservicio de Usuarios"
					},
					"response": []
				},
				{
					"name": "Health Check - Productos",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Servicio de Productos est√° funcionando', function () {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json();",
									"    pm.expect(response.status).to.eql('up');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_productos}}/health",
							"host": [
								"{{base_url_productos}}"
							],
							"path": [
								"health"
							]
						},
						"description": "Verifica el estado del microservicio de Productos"
					},
					"response": []
				},
				{
					"name": "Health Check - Ventas",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Servicio de Ventas est√° funcionando', function () {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json();",
									"    pm.expect(response.status).to.eql('up');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_ventas}}/health",
							"host": [
								"{{base_url_ventas}}"
							],
							"path": [
								"health"
							]
						},
						"description": "Verifica el estado del microservicio de Ventas"
					},
					"response": []
				},
				{
					"name": "Health Check - Log√≠stica",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Servicio de Log√≠stica est√° funcionando', function () {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json();",
									"    pm.expect(response.status).to.eql('up');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_logistica}}/health",
							"host": [
								"{{base_url_logistica}}"
							],
							"path": [
								"health"
							]
						},
						"description": "Verifica el estado del microservicio de Log√≠stica"
					},
					"response": []
				}
			],
			"description": "Verificar que todos los servicios est√©n funcionando correctamente"
		},
		{
			"name": "üîê 2. Autenticaci√≥n JWT",
			"item": [
				{
					"name": "Registro de Cliente",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Cliente registrado exitosamente o ya existe', function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([201, 409]);",
									"    ",
									"    const response = pm.response.json();",
									"    ",
									"    if (pm.response.code === 201) {",
									"        pm.expect(response).to.have.property('mensaje');",
									"        pm.expect(response).to.have.property('cliente');",
									"        pm.expect(response.cliente).to.have.property('id');",
									"        pm.collectionVariables.set('cliente_auth_id', response.cliente.id);",
									"        console.log('Cliente registrado con ID:', response.cliente.id);",
									"        ",
									"    } else if (pm.response.code === 409) {",
									"        pm.expect(response).to.have.property('error');",
									"        pm.expect(response.error).to.include('correo ya est√° registrado');",
									"",
									"        if (response.cliente && response.cliente.id) {",
									"            pm.collectionVariables.set('cliente_auth_id', response.cliente.id);",
									"            console.log('Cliente ya existe con ID:', response.cliente.id);",
									"        } else {",
									"            console.log('Cliente ya existe (correo duplicado)');",
									"        }",
									"    }",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"nombre\": \"Cl√≠nica Los Olivos\",\n    \"email\": \"contacto@losolivos.com\",\n    \"identificacion\": \"8609876543\",\n    \"telefono\": \"6014567890\",\n    \"direccion\": \"Carrera 15 #88-52, Usaqu√©n, Bogot√° D.C.\",\n    \"password\": \"ClinicaPass456\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url_usuarios}}/api/auth/registro-cliente",
							"host": [
								"{{base_url_usuarios}}"
							],
							"path": [
								"api",
								"auth",
								"registro-cliente"
							]
						},
						"description": "Registra un nuevo cliente con autenticaci√≥n JWT"
					},
					"response": []
				},
				{
					"name": "Registro de Proveedor",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Proveedor registrado exitosamente o ya existe', function () {",
									"    // Aceptar 201 (creado) o 409 (ya existe)",
									"    pm.expect(pm.response.code).to.be.oneOf([201, 409]);",
									"    ",
									"    const response = pm.response.json();",
									"    ",
									"    if (pm.response.code === 201) {",
									"        // Caso 1: Proveedor creado exitosamente",
									"        pm.expect(response).to.have.property('mensaje');",
									"        pm.expect(response).to.have.property('proveedor');",
									"        pm.expect(response.proveedor).to.have.property('id');",
									"        pm.collectionVariables.set('proveedor_auth_id', response.proveedor.id);",
									"        console.log('‚úÖ Proveedor registrado con ID:', response.proveedor.id);",
									"        ",
									"    } else if (pm.response.code === 409) {",
									"        // Caso 2: Proveedor ya existe",
									"        pm.expect(response).to.have.property('error');",
									"        pm.expect(response.error).to.include('correo ya est√° registrado');",
									"        console.log('‚ö†Ô∏è Proveedor ya existe (correo duplicado) - continuando...');",
									"    }",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"nombre\": \"Pfizer Colombia\",\n    \"email\": \"contacto@pfizer.com.co\",\n    \"identificacion\": \"9005678901\",\n    \"telefono\": \"6017654321\",\n    \"direccion\": \"Calle 26 #59-17, Teusaquillo, Bogot√° D.C.\",\n    \"password\": \"PfizerSecure789\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url_usuarios}}/api/auth/registro-proveedor",
							"host": [
								"{{base_url_usuarios}}"
							],
							"path": [
								"api",
								"auth",
								"registro-proveedor"
							]
						},
						"description": "Registra un nuevo proveedor con autenticaci√≥n JWT"
					},
					"response": []
				},
				{
					"name": "Registro de Vendedor",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Vendedor registrado exitosamente o ya existe', function () {",
									"    // Aceptar 201 (creado) o 409 (ya existe)",
									"    pm.expect(pm.response.code).to.be.oneOf([201, 409]);",
									"    ",
									"    const response = pm.response.json();",
									"    ",
									"    if (pm.response.code === 201) {",
									"        // Caso 1: Vendedor creado exitosamente",
									"        pm.expect(response).to.have.property('mensaje');",
									"        pm.expect(response).to.have.property('vendedor');",
									"        pm.expect(response.vendedor).to.have.property('id');",
									"        pm.collectionVariables.set('vendedor_auth_id', response.vendedor.id);",
									"        console.log('Vendedor registrado con ID:', response.vendedor.id);",
									"        ",
									"    } else if (pm.response.code === 409) {",
									"        // Caso 2: Vendedor ya existe",
									"        pm.expect(response).to.have.property('error');",
									"        pm.expect(response.error).to.include('correo ya est√° registrado');",
									"        console.log('Vendedor ya existe (correo duplicado) - continuando...');",
									"    }",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"nombre\": \"Mar√≠a Garc√≠a\",\n    \"email\": \"maria.garcia@empresa.com\",\n    \"identificacion\": \"9876543210\",\n    \"telefono\": \"3009876543\",\n    \"direccion\": \"Calle 100 #19-20, Usaqu√©n, Bogot√° D.C.\",\n    \"password\": \"MiPassword123\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url_usuarios}}/api/auth/registro-vendedor",
							"host": [
								"{{base_url_usuarios}}"
							],
							"path": [
								"api",
								"auth",
								"registro-vendedor"
							]
						},
						"description": "Registra un nuevo vendedor con autenticaci√≥n JWT"
					},
					"response": []
				},
				{
					"name": "Login de Vendedor",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Login exitoso', function () {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json();",
									"    pm.expect(response).to.have.property('access_token');",
									"    pm.expect(response).to.have.property('user_info');",
									"    pm.expect(response.user_info).to.have.property('tipo_usuario');",
									"    pm.expect(response.user_info.tipo_usuario).to.eql('VENDEDOR');",
									"    pm.collectionVariables.set('access_token', response.access_token);",
									"    console.log('Token JWT guardado');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"maria.garcia@empresa.com\",\n    \"password\": \"MiPassword123\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url_auth}}/login",
							"host": [
								"{{base_url_auth}}"
							],
							"path": [
								"login"
							]
						},
						"description": "Autentica un vendedor a trav√©s del Auth-Service centralizado y obtiene token JWT v√°lido por 24 horas"
					},
					"response": []
				},
				{
					"name": "Registro de Administrador",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Administrador registrado exitosamente o ya existe', function () {",
									"    // Aceptar 201 (creado) o 409 (ya existe)",
									"    pm.expect(pm.response.code).to.be.oneOf([201, 409]);",
									"    ",
									"    const response = pm.response.json();",
									"    ",
									"    if (pm.response.code === 201) {",
									"        // Caso 1: Administrador creado exitosamente",
									"        pm.expect(response).to.have.property('mensaje');",
									"        pm.expect(response).to.have.property('administrador');",
									"        pm.expect(response.administrador).to.have.property('id');",
									"        pm.collectionVariables.set('admin_id', response.administrador.id);",
									"        console.log('Administrador registrado con ID:', response.administrador.id);",
									"        ",
									"    } else if (pm.response.code === 409) {",
									"        // Caso 2: Administrador ya existe",
									"        pm.expect(response).to.have.property('error');",
									"        pm.expect(response.error).to.include('correo ya est√° registrado');",
									"        console.log('Administrador ya existe (correo duplicado) - continuando...');",
									"    }",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"nombre\": \"Admin Sistema\",\n    \"email\": \"admin@medisupply.com\",\n    \"password\": \"AdminPass123\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url_usuarios}}/api/auth/registro-administrador",
							"host": [
								"{{base_url_usuarios}}"
							],
							"path": [
								"api",
								"auth",
								"registro-administrador"
							]
						},
						"description": "Registra un nuevo administrador con permisos completos en el sistema"
					},
					"response": []
				},
				{
					"name": "Login de Administrador",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Login de administrador exitoso', function () {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json();",
									"    pm.expect(response).to.have.property('access_token');",
									"    pm.expect(response).to.have.property('user_info');",
									"    pm.expect(response.user_info).to.have.property('tipo_usuario');",
									"    pm.expect(response.user_info.tipo_usuario).to.eql('ADMINISTRADOR');",
									"    pm.collectionVariables.set('access_token', response.access_token);",
									"    pm.collectionVariables.set('admin_token', response.access_token);",
									"    console.log('Token JWT de administrador guardado');",
									"    console.log('NOTA: Este token se usar√° para el resto del flujo');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"admin@medisupply.com\",\n    \"password\": \"AdminPass2024\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url_auth}}/login",
							"host": [
								"{{base_url_auth}}"
							],
							"path": [
								"login"
							]
						},
						"description": "Autentica un administrador a trav√©s del Auth-Service. El token obtenido tiene permisos completos para todos los endpoints del sistema."
					},
					"response": []
				}
			],
			"description": "Registrar usuarios y obtener tokens JWT para autenticaci√≥n"
		},
		{
			"name": "üë• 3. Crear Entidades Base",
			"item": [
				{
					"name": "Crear Proveedor",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Proveedor creado exitosamente', function () {",
									"    pm.response.to.have.status(201);",
									"    const response = pm.response.json();",
									"    pm.expect(response).to.have.property('id');",
									"    pm.collectionVariables.set('proveedor_id', response.id);",
									"    console.log('Proveedor ID guardado:', response.id);",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"nombre\": \"Bayer Colombia\",\n    \"email\": \"contacto@bayer.com.co\",\n    \"identificacion\": \"9001234567\",\n    \"telefono\": \"6013456789\",\n    \"direccion\": \"Calle 26 #59-17, Teusaquillo, Bogot√° D.C.\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url_usuarios}}/api/proveedores/",
							"host": [
								"{{base_url_usuarios}}"
							],
							"path": [
								"api",
								"proveedores",
								""
							]
						},
						"description": "Crea un nuevo proveedor y guarda su ID para uso posterior"
					},
					"response": []
				},
				{
					"name": "Crear Categor√≠a",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Categor√≠a creada exitosamente', function () {",
									"    pm.response.to.have.status(201);",
									"    const response = pm.response.json();",
									"    pm.expect(response).to.have.property('id');",
									"    pm.collectionVariables.set('categoria_id', response.id);",
									"    console.log('Categor√≠a ID guardada:', response.id);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"nombre\": \"Medicamentos\",\n    \"descripcion\": \"Productos farmac√©uticos y medicamentos\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url_productos}}/api/categorias/",
							"host": [
								"{{base_url_productos}}"
							],
							"path": [
								"api",
								"categorias",
								""
							]
						},
						"description": "Crea una nueva categor√≠a y guarda su ID para uso posterior"
					},
					"response": []
				},
				{
					"name": "Crear Vendedor",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Vendedor creado exitosamente', function () {",
									"    pm.response.to.have.status(201);",
									"    const response = pm.response.json();",
									"    pm.expect(response).to.have.property('id');",
									"    pm.collectionVariables.set('vendedor_id', response.id);",
									"    console.log('Vendedor ID guardado:', response.id);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"nombre\": \"Juan P√©rez\",\n    \"email\": \"juan.perez@empresa.com\",\n    \"identificacion\": \"1234567890\",\n    \"telefono\": \"3001234567\",\n    \"direccion\": \"Calle 100 #19-20, Usaqu√©n, Bogot√° D.C.\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url_usuarios}}/api/vendedores/",
							"host": [
								"{{base_url_usuarios}}"
							],
							"path": [
								"api",
								"vendedores",
								""
							]
						},
						"description": "Crea un nuevo vendedor y guarda su ID para uso posterior"
					},
					"response": []
				},
				{
					"name": "Crear Cliente",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Cliente creado exitosamente', function () {",
									"    pm.response.to.have.status(201);",
									"    const response = pm.response.json();",
									"    pm.expect(response).to.have.property('id');",
									"    pm.collectionVariables.set('cliente_id', response.id);",
									"    console.log('Cliente ID guardado:', response.id);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"nombre\": \"Hospital San Ignacio\",\n    \"email\": \"contacto@sanignacio.com\",\n    \"identificacion\": \"8601234567\",\n    \"telefono\": \"3115566778\",\n    \"direccion\": \"Carrera 7 #32-16, Bogot√° D.C.\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url_usuarios}}/api/clientes/",
							"host": [
								"{{base_url_usuarios}}"
							],
							"path": [
								"api",
								"clientes",
								""
							]
						},
						"description": "Crea un nuevo cliente y guarda su ID para uso posterior"
					},
					"response": []
				},
				{
					"name": "Modificar Estado del Cliente",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Estado del cliente modificado exitosamente', function () {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json();",
									"    pm.expect(response).to.have.property('id');",
									"    pm.expect(response).to.have.property('estado');",
									"    pm.expect(response.estado).to.eql('INACTIVO');",
									"    console.log('Estado del cliente modificado a:', response.estado);",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"estado\": \"INACTIVO\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url_usuarios}}/api/clientes/{{cliente_id}}/estado",
							"host": [
								"{{base_url_usuarios}}"
							],
							"path": [
								"api",
								"clientes",
								"{{cliente_id}}",
								"estado"
							]
						},
						"description": "Modifica el estado de un cliente espec√≠fico. Estados v√°lidos: ACTIVO, INACTIVO"
					},
					"response": []
				}
			],
			"description": "Crear proveedores, categor√≠as, vendedores y clientes necesarios para el flujo"
		},
		{
			"name": "üì¶ 4. Crear Productos",
			"item": [
				{
					"name": "Crear Producto B√°sico",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Producto b√°sico creado exitosamente', function () {",
									"    pm.response.to.have.status(201);",
									"    const response = pm.response.json();",
									"    pm.expect(response).to.have.property('id');",
									"    pm.collectionVariables.set('producto_basico_id', response.id);",
									"    console.log('Producto b√°sico ID guardado:', response.id);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"nombre\": \"Paracetamol 500mg\",\n    \"descripcion\": \"Analg√©sico y antipir√©tico\",\n    \"precio\": 25000,\n    \"categoria\": \"Medicamentos\",\n    \"categoria_id\": \"{{categoria_id}}\",\n    \"proveedor_id\": \"{{proveedor_id}}\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url_productos}}/api/productos/",
							"host": [
								"{{base_url_productos}}"
							],
							"path": [
								"api",
								"productos",
								""
							]
						},
						"description": "Crea un producto b√°sico sin inventario"
					},
					"response": []
				},
				{
					"name": "Crear Producto con Inventario",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Producto con inventario creado exitosamente', function () {",
									"    pm.response.to.have.status(201);",
									"    const response = pm.response.json();",
									"    pm.expect(response).to.have.property('id');",
									"    pm.collectionVariables.set('producto_inventario_id', response.id);",
									"    console.log('Producto con inventario ID guardado:', response.id);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"nombre\": \"Ibuprofeno 400mg\",\n    \"descripcion\": \"Antiinflamatorio no esteroideo\",\n    \"precio\": 18000,\n    \"stock\": 50,\n    \"fecha_vencimiento\": \"2025-12-31T00:00:00Z\",\n    \"categoria\": \"Medicamentos\",\n    \"categoria_id\": \"{{categoria_id}}\",\n    \"proveedor_id\": \"{{proveedor_id}}\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url_productos}}/api/productos/con-inventario",
							"host": [
								"{{base_url_productos}}"
							],
							"path": [
								"api",
								"productos",
								"con-inventario"
							]
						},
						"description": "Crea un producto con informaci√≥n de inventario incluida"
					},
					"response": []
				},
				{
					"name": "Listar Todos los Productos",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Productos listados exitosamente', function () {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json();",
									"    pm.expect(response.items).to.be.an('array');",
									"    console.log('Total de productos:', response.length);",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_productos}}/api/productos/",
							"host": [
								"{{base_url_productos}}"
							],
							"path": [
								"api",
								"productos",
								""
							]
						},
						"description": "Lista todos los productos creados"
					},
					"response": []
				}
			],
			"description": "Crear productos con y sin inventario usando las entidades base creadas"
		},
		{
			"name": "üìÖ 5. Crear Visitas",
			"item": [
				{
					"name": "Crear Plan de Visitas",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Plan creado exitosamente', function () {",
									"    pm.response.to.have.status(201);",
									"    const response = pm.response.json();",
									"    pm.expect(response.success).to.be.true;",
									"    pm.expect(response.plan_id).to.exist;",
									"    ",
									"    // Guardar plan_id para uso en flujos siguientes",
									"    pm.collectionVariables.set('plan_id', response.plan_id);",
									"    pm.environment.set('plan_id', response.plan_id);",
									"    ",
									"    console.log('‚úÖ Plan creado con ID:', response.plan_id);",
									"    console.log('‚úÖ El plan ha creado autom√°ticamente las visitas asociadas');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"nombre\": \"Plan de Visitas Octubre 2025\",\n    \"id_usuario\": \"{{vendedor_id}}\",\n    \"fecha_inicio\": \"2025-10-01T00:00:00\",\n    \"fecha_fin\": \"2025-10-31T23:59:59\",\n    \"visitas_clientes\": [\n        {\n            \"id_cliente\": \"{{cliente_id}}\",\n            \"visitas\": [\n                \"2025-10-05T10:00:00\",\n                \"2025-10-15T14:00:00\",\n                \"2025-10-25T09:00:00\"\n            ]\n        }\n    ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url_ventas}}/api/planes/",
							"host": [
								"{{base_url_ventas}}"
							],
							"path": [
								"api",
								"planes",
								""
							]
						},
						"description": "Crea un nuevo plan de ventas con sus visitas asociadas. El plan agrupa m√∫ltiples visitas programadas para diferentes clientes.\n\n**Caracter√≠sticas:**\n- Las visitas se crean autom√°ticamente con direcci√≥n y tel√©fono obtenidos del servicio de Usuarios\n- El plan_id se guarda autom√°ticamente para uso en flujos siguientes\n- Un plan puede tener m√∫ltiples clientes, cada cliente puede tener m√∫ltiples visitas\n\n**Flujo:** Este endpoint debe ejecutarse ANTES de crear visitas individuales si quieres agruparlas en un plan."
					},
					"response": []
				},
				{
					"name": "Obtener Planes Creados",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Planes obtenidos exitosamente', function () {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json();",
									"    pm.expect(response).to.have.property('items');",
									"    pm.expect(response).to.have.property('pagination');",
									"    pm.expect(response.items).to.be.an('array');",
									"    ",
									"    if (response.items.length > 0) {",
									"        const plan = response.items[0];",
									"        pm.expect(plan).to.have.property('id');",
									"        pm.expect(plan).to.have.property('visitas_clientes');",
									"        pm.expect(plan.visitas_clientes).to.be.an('array');",
									"        ",
									"        console.log('‚úÖ Plan encontrado:', plan.nombre);",
									"        console.log('‚úÖ Total de clientes en el plan:', plan.visitas_clientes.length);",
									"        ",
									"        // Mostrar visitas agrupadas por cliente",
									"        plan.visitas_clientes.forEach((cliente, index) => {",
									"            console.log(`   Cliente ${index + 1}: ${cliente.id_cliente} tiene ${cliente.visitas.length} visitas`);",
									"        });",
									"    } else {",
									"        console.log('‚ö†Ô∏è No hay planes creados a√∫n');",
									"    }",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "X-User-Role",
								"value": "VENDEDOR",
								"description": "Rol del usuario (ADMINISTRADOR para ver todos, VENDEDOR para ver solo los suyos)"
							}
						],
						"url": {
							"raw": "{{base_url_ventas}}/api/planes/?user_id={{vendedor_id}}&page=1&page_size=10",
							"host": [
								"{{base_url_ventas}}"
							],
							"path": [
								"api",
								"planes",
								""
							],
							"query": [
								{
									"key": "user_id",
									"value": "{{vendedor_id}}",
									"description": "ID del vendedor para filtrar sus planes"
								},
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "page_size",
									"value": "10"
								}
							]
						},
						"description": "Obtiene los planes de visita del vendedor autenticado. Los planes incluyen todas las visitas agrupadas por cliente con informaci√≥n completa (id, fecha_programada, direccion, telefono, estado). Soporta paginaci√≥n."
					},
					"response": []
				},
				{
					"name": "Crear Visita de Venta",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Visita creada exitosamente', function () {",
									"    pm.response.to.have.status(201);",
									"    const response = pm.response.json();",
									"    pm.expect(response).to.have.property('id');",
									"    pm.collectionVariables.set('visita_id', response.id);",
									"    console.log('Visita ID guardada:', response.id);",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"vendedor_id\": \"{{vendedor_id}}\",\n    \"cliente_id\": \"{{cliente_id}}\",\n    \"fecha_programada\": \"2026-10-15T10:00:00\",\n    \"direccion\": \"Carrera 7 #32-16, Bogot√° D.C.\",\n    \"telefono\": \"3115566778\",\n    \"estado\": \"pendiente\",\n    \"descripcion\": \"Visita programada para presentaci√≥n de productos\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url_ventas}}/api/visitas/",
							"host": [
								"{{base_url_ventas}}"
							],
							"path": [
								"api",
								"visitas",
								""
							]
						},
						"description": "Crea una nueva visita de venta programada"
					},
					"response": []
				},
				{
					"name": "Listar Visitas Pendientes",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Visitas pendientes listadas exitosamente', function () {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json();",
									"    pm.expect(response.items).to.be.an('array');",
									"    console.log('Total de visitas pendientes:', response.length);",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_ventas}}/api/visitas/?estado=pendiente",
							"host": [
								"{{base_url_ventas}}"
							],
							"path": [
								"api",
								"visitas",
								""
							],
							"query": [
								{
									"key": "estado",
									"value": "pendiente"
								}
							]
						},
						"description": "Lista las visitas en estado pendiente. Soporta paginaci√≥n con par√°metros ?page=1&page_size=20"
					},
					"response": []
				},
				{
					"name": "Listar Visitas por Rango de Fechas",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Visitas por rango de fechas listadas exitosamente', function () {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json();",
									"    pm.expect(response.items).to.be.an('array');",
									"    console.log('Total de visitas en el rango:', response.length);",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_ventas}}/api/visitas/?fecha_inicio=2025-10-13&fecha_fin=2027-10-17&estado=pendiente",
							"host": [
								"{{base_url_ventas}}"
							],
							"path": [
								"api",
								"visitas",
								""
							],
							"query": [
								{
									"key": "fecha_inicio",
									"value": "2025-10-13",
									"description": "Fecha de inicio del rango (YYYY-MM-DD)"
								},
								{
									"key": "fecha_fin",
									"value": "2027-10-17",
									"description": "Fecha de fin del rango (YYYY-MM-DD)"
								},
								{
									"key": "estado",
									"value": "pendiente",
									"description": "Filtrar por estado de la visita"
								}
							]
						},
						"description": "Lista las visitas programadas en un rango de fechas espec√≠fico, filtradas por estado. Soporta paginaci√≥n con par√°metros ?page=1&page_size=20"
					},
					"response": []
				},
				{
					"name": "Listar Visitas por Vendedor y Fechas",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Visitas por vendedor y fechas listadas exitosamente', function () {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json();",
									"    pm.expect(response.items).to.be.an('array');",
									"    console.log('Total de visitas del vendedor en el rango:', response.length);",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_ventas}}/api/visitas/vendedor/{{vendedor_id}}?fecha_inicio=2025-10-13&fecha_fin=2027-10-17&estado=pendiente",
							"host": [
								"{{base_url_ventas}}"
							],
							"path": [
								"api",
								"visitas",
								"vendedor",
								"{{vendedor_id}}"
							],
							"query": [
								{
									"key": "fecha_inicio",
									"value": "2025-10-13",
									"description": "Fecha de inicio del rango (YYYY-MM-DD)"
								},
								{
									"key": "fecha_fin",
									"value": "2027-10-17",
									"description": "Fecha de fin del rango (YYYY-MM-DD)"
								},
								{
									"key": "estado",
									"value": "pendiente",
									"description": "Filtrar por estado de la visita"
								}
							]
						},
						"description": "Lista las visitas de un vendedor espec√≠fico en un rango de fechas, filtradas por estado. Soporta paginaci√≥n con par√°metros ?page=1&page_size=20"
					},
					"response": []
				}
			],
			"description": "Crear planes de visitas (que generan visitas autom√°ticamente) y visitas de venta programadas individuales. El flujo recomienda crear primero un plan que agrupa m√∫ltiples visitas, y luego consultar los planes creados."
		},
		{
			"name": "üõí 6. Crear Pedidos",
			"item": [
				{
					"name": "Crear Pedido",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Pedido creado exitosamente', function () {",
									"    pm.response.to.have.status(201);",
									"    const response = pm.response.json();",
									"    pm.expect(response).to.have.property('pedido_id');",
									"    pm.collectionVariables.set('pedido_id', response.pedido_id);",
									"    console.log('Pedido ID guardado:', response.pedido_id);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"vendedor_id\": \"{{vendedor_id}}\",\n    \"cliente_id\": \"{{cliente_id}}\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url_ventas}}/api/pedidos/",
							"host": [
								"{{base_url_ventas}}"
							],
							"path": [
								"api",
								"pedidos",
								""
							]
						},
						"description": "Crea un nuevo pedido en estado borrador"
					},
					"response": []
				},
				{
					"name": "Crear Pedido Completo",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Pedido completo creado y confirmado exitosamente', function () {",
									"    pm.response.to.have.status(201);",
									"    const response = pm.response.json();",
									"    pm.expect(response).to.have.property('success');",
									"    pm.expect(response.success).to.be.true;",
									"    pm.expect(response).to.have.property('pedido_id');",
									"    pm.expect(response).to.have.property('estado');",
									"    pm.expect(response.estado).to.eql('confirmado');",
									"    pm.collectionVariables.set('pedido_completo_id', response.pedido_id);",
									"    console.log('Pedido completo creado y confirmado:', response.pedido_id);",
									"    console.log('Total del pedido:', response.total);",
									"    console.log('Items procesados:', response.items_count);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"vendedor_id\": \"{{vendedor_id}}\",\n    \"cliente_id\": \"{{cliente_id}}\",\n    \"items\": [\n        {\n            \"producto_id\": \"{{producto_inventario_id}}\",\n            \"cantidad\": 5\n        },\n        {\n            \"producto_id\": \"{{producto_inventario_id}}\",\n            \"cantidad\": 3\n        }\n    ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url_ventas}}/api/pedidos/completo",
							"host": [
								"{{base_url_ventas}}"
							],
							"path": [
								"api",
								"pedidos",
								"completo"
							]
						},
						"description": "Crea un pedido completo con items y lo confirma autom√°ticamente en una sola operaci√≥n. Valida inventario y reserva stock."
					},
					"response": []
				},
				{
					"name": "Agregar Item al Pedido",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Item agregado al pedido exitosamente', function () {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json();",
									"    pm.expect(response).to.have.property('success');",
									"    pm.expect(response.success).to.be.true;",
									"    console.log('Item agregado al pedido');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"producto_id\": \"{{producto_inventario_id}}\",\n    \"cantidad\": 3\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url_ventas}}/api/pedidos/{{pedido_id}}/items",
							"host": [
								"{{base_url_ventas}}"
							],
							"path": [
								"api",
								"pedidos",
								"{{pedido_id}}",
								"items"
							]
						},
						"description": "Agrega un producto al pedido con cantidad espec√≠fica"
					},
					"response": []
				},
				{
					"name": "Obtener Detalle del Pedido",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Detalle del pedido obtenido exitosamente', function () {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json();",
									"    pm.expect(response).to.have.property('id');",
									"    console.log('Pedido obtenido:', response.id);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_ventas}}/api/pedidos/{{pedido_id}}",
							"host": [
								"{{base_url_ventas}}"
							],
							"path": [
								"api",
								"pedidos",
								"{{pedido_id}}"
							]
						},
						"description": "Obtiene el detalle completo del pedido con sus items"
					},
					"response": []
				},
				{
					"name": "Confirmar Pedido",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Pedido confirmado exitosamente', function () {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json();",
									"    pm.expect(response).to.have.property('success');",
									"    pm.expect(response.success).to.be.true;",
									"    console.log('Pedido confirmado y enviado a log√≠stica');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{base_url_ventas}}/api/pedidos/{{pedido_id}}/confirmar",
							"host": [
								"{{base_url_ventas}}"
							],
							"path": [
								"api",
								"pedidos",
								"{{pedido_id}}",
								"confirmar"
							]
						},
						"description": "Confirma el pedido y lo env√≠a a log√≠stica para procesamiento"
					},
					"response": []
				},
				{
					"name": "Obtener Pedidos por Cliente",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Pedidos del cliente obtenidos exitosamente', function () {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json();",
									"    ",
									"    // Puede ser array simple o con paginaci√≥n",
									"    if (response.items) {",
									"        pm.expect(response.items).to.be.an('array');",
									"        pm.expect(response).to.have.property('pagination');",
									"        console.log('Pedidos del cliente (paginados):', response.items.length);",
									"        console.log('Total de pedidos:', response.pagination.total_items);",
									"    } else {",
									"        pm.expect(response).to.be.an('array');",
									"        console.log('Pedidos del cliente:', response.length);",
									"    }",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_ventas}}/api/pedidos/?cliente_id={{cliente_id}}",
							"host": [
								"{{base_url_ventas}}"
							],
							"path": [
								"api",
								"pedidos",
								""
							],
							"query": [
								{
									"key": "cliente_id",
									"value": "{{cliente_id}}"
								}
							]
						},
						"description": "Obtiene todos los pedidos de un cliente espec√≠fico. Soporta paginaci√≥n con par√°metros page y page_size."
					},
					"response": []
				}
			],
			"description": "Crear pedidos con items y confirmarlos"
		},
		{
			"name": "üì¶ 7. Gestionar Inventario",
			"item": [
				{
					"name": "Buscar Productos con Inventario",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('B√∫squeda de productos con inventario exitosa', function () {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json();",
									"    pm.expect(response).to.be.an('array');",
									"    console.log('Productos con inventario encontrados:', response.length);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_logistica}}/api/inventario/buscar?q=ibuprofeno&limite=10",
							"host": [
								"{{base_url_logistica}}"
							],
							"path": [
								"api",
								"inventario",
								"buscar"
							],
							"query": [
								{
									"key": "q",
									"value": "ibuprofeno"
								},
								{
									"key": "limite",
									"value": "10"
								}
							]
						},
						"description": "Busca productos que tengan inventario disponible"
					},
					"response": []
				},
				{
					"name": "Obtener Inventario de Producto",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Inventario del producto obtenido exitosamente', function () {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json();",
									"    pm.expect(response).to.have.property('producto_id');",
									"    console.log('Inventario del producto:', response.producto_id);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_logistica}}/api/inventario/producto/{{producto_inventario_id}}",
							"host": [
								"{{base_url_logistica}}"
							],
							"path": [
								"api",
								"inventario",
								"producto",
								"{{producto_inventario_id}}"
							]
						},
						"description": "Obtiene el inventario detallado de un producto espec√≠fico con ubicaciones en bodegas"
					},
					"response": []
				},
				{
					"name": "Obtener Todo el Inventario",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Inventario completo obtenido exitosamente', function () {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json();",
									"    pm.expect(response).to.be.an('array');",
									"    console.log('Total de productos en inventario:', response.length);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_logistica}}/api/inventario/",
							"host": [
								"{{base_url_logistica}}"
							],
							"path": [
								"api",
								"inventario",
								""
							]
						},
						"description": "Obtiene todo el inventario agrupado por producto"
					},
					"response": []
				}
			],
			"description": "Consultar y gestionar el inventario de productos"
		},
		{
			"name": "üè¢ 8. Gestionar Bodegas",
			"item": [
				{
					"name": "Inicializar Bodegas por Defecto",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Bodegas inicializadas exitosamente', function () {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json();",
									"    pm.expect(response).to.have.property('count');",
									"    pm.expect(response.count).to.be.greaterThan(0);",
									"    console.log('Bodegas creadas:', response.count);",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{base_url_logistica}}/api/bodegas/inicializar",
							"host": [
								"{{base_url_logistica}}"
							],
							"path": [
								"api",
								"bodegas",
								"inicializar"
							]
						},
						"description": "Crea 3 bodegas por defecto: Central, Norte y Sur"
					},
					"response": []
				},
				{
					"name": "Obtener Todas las Bodegas",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Lista de bodegas obtenida exitosamente', function () {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json().items;",
									"    pm.expect(response).to.be.an('array');",
									"    pm.expect(response.length).to.be.greaterThan(0);",
									"    pm.collectionVariables.set('bodega_id', response[0].id);",
									"    console.log('Bodegas encontradas:', response.length);",
									"    console.log('Primera bodega ID guardado:', response[0].id);",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_logistica}}/api/bodegas/",
							"host": [
								"{{base_url_logistica}}"
							],
							"path": [
								"api",
								"bodegas",
								""
							]
						},
						"description": "Obtiene la lista de todas las bodegas disponibles en el sistema"
					},
					"response": []
				},
				{
					"name": "Obtener Todos los Productos",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Todos los productos obtenidos exitosamente', function () {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json();",
									"    pm.expect(response.items).to.be.an('array');",
									"    pm.expect(response.items.length).to.be.greaterThan(0);",
									"    console.log('Total productos encontrados:', response.length);",
									"});",
									"",
									"pm.test('Estructura de productos v√°lida', function () {",
									"    const response = pm.response.json();",
									"    const producto = response.items[0];",
									"    pm.expect(producto).to.have.property('id');",
									"    pm.expect(producto).to.have.property('nombre');",
									"    pm.expect(producto).to.have.property('stock');",
									"    pm.expect(producto).to.have.property('ubicaciones');",
									"    pm.expect(producto.ubicaciones).to.be.an('array');",
									"    pm.expect(producto.ubicaciones.length).to.be.greaterThan(0);",
									"    console.log('Primer producto:', producto);",
									"});",
									"",
									"pm.test('Estructura de ubicaciones v√°lida', function () {",
									"    const response = pm.response.json();",
									"    const ubicacion = response.items[0].ubicaciones[0];",
									"    pm.expect(ubicacion).to.have.property('nombre');",
									"    pm.expect(ubicacion).to.have.property('pasillo');",
									"    pm.expect(ubicacion).to.have.property('estante');",
									"    pm.expect(ubicacion).to.have.property('stock_disponible');",
									"    pm.expect(ubicacion).to.have.property('stock_reservado');",
									"    pm.expect(ubicacion.stock_disponible).to.be.a('number');",
									"    pm.expect(ubicacion.stock_reservado).to.be.a('number');",
									"    pm.collectionVariables.set('bodega_id', ubicacion.bodega_id);",
									"    console.log('Primera ubicaci√≥n:', ubicacion);",
									"});",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_logistica}}/api/bodegas/productos",
							"host": [
								"{{base_url_logistica}}"
							],
							"path": [
								"api",
								"bodegas",
								"productos"
							]
						},
						"description": "Obtiene todos los productos de todas las bodegas con sus ubicaciones"
					},
					"response": []
				},
				{
					"name": "Obtener Productos en Bodega",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Productos en bodega obtenidos exitosamente', function () {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json().items;",
									"    pm.expect(response).to.be.an('array');",
									"    pm.expect(response.length).to.be.greaterThan(0);",
									"    console.log('Productos en bodega:', response.length);",
									"});",
									"",
									"pm.test('Estructura de productos v√°lida', function () {",
									"    const response = pm.response.json().items;",
									"    const producto = response[0];",
									"    pm.expect(producto).to.have.property('producto_id');",
									"    pm.expect(producto).to.have.property('cantidad_total');",
									"    pm.expect(producto).to.have.property('ubicaciones');",
									"    pm.expect(producto.ubicaciones).to.be.an('array');",
									"    pm.expect(producto.ubicaciones.length).to.be.greaterThan(0);",
									"    console.log('Primer producto:', producto);",
									"});",
									"",
									"pm.test('Estructura de ubicaciones v√°lida', function () {",
									"    const response = pm.response.json().items;",
									"    const ubicacion = response[0].ubicaciones[0];",
									"    pm.expect(ubicacion).to.have.property('pasillo');",
									"    pm.expect(ubicacion).to.have.property('estante');",
									"    pm.expect(ubicacion).to.have.property('cantidad_disponible');",
									"    pm.expect(ubicacion).to.have.property('cantidad_reservada');",
									"    pm.expect(ubicacion.cantidad_disponible).to.be.a('number');",
									"    pm.expect(ubicacion.cantidad_reservada).to.be.a('number');",
									"    console.log('Primera ubicaci√≥n:', ubicacion);",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_logistica}}/api/bodegas/{{bodega_id}}/productos",
							"host": [
								"{{base_url_logistica}}"
							],
							"path": [
								"api",
								"bodegas",
								"{{bodega_id}}",
								"productos"
							]
						},
						"description": "Obtiene todos los productos y sus cantidades en una bodega espec√≠fica"
					},
					"response": []
				},
				{
					"name": "Obtener Ubicacion de Producto",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Ubicaci√≥n de producto obtenida exitosamente', function () {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json();",
									"    pm.expect(response).to.be.an('object');",
									"    pm.expect(response).to.have.property('id');",
									"    pm.expect(response).to.have.property('nombre');",
									"    pm.expect(response).to.have.property('ubicaciones');",
									"    pm.expect(response.ubicaciones).to.be.an('array');",
									"    console.log('üßæ Producto:', response.nombre, '| ID:', response.id);",
									"    console.log('Ubicaciones encontradas:', response.ubicaciones.length);",
									"});",
									"",
									"pm.test('Estructura de ubicaciones v√°lida', function () {",
									"    const response = pm.response.json();",
									"    const ubicaciones = response.ubicaciones || [];",
									"    pm.expect(ubicaciones.length).to.be.greaterThan(0);",
									"",
									"    const ubicacion = ubicaciones[0];",
									"    pm.expect(ubicacion).to.have.property('id');",
									"    pm.expect(ubicacion).to.have.property('nombre');",
									"    pm.expect(ubicacion).to.have.property('pasillo');",
									"    pm.expect(ubicacion).to.have.property('estante');",
									"    pm.expect(ubicacion).to.have.property('stock_disponible');",
									"    pm.expect(ubicacion).to.have.property('stock_reservado');",
									"",
									"    pm.expect(ubicacion.stock_disponible).to.be.a('number');",
									"    pm.expect(ubicacion.stock_reservado).to.be.a('number');",
									"",
									"    console.log('üè† Primera ubicaci√≥n:', ubicacion.nombre);",
									"    console.log('üì¶ Pasillo:', ubicacion.pasillo, '| Estante:', ubicacion.estante);",
									"});",
									"",
									"pm.test('Datos de proveedor y categor√≠a v√°lidos', function () {",
									"    const response = pm.response.json();",
									"    pm.expect(response).to.have.property('proveedor');",
									"    pm.expect(response.proveedor).to.have.property('nombre');",
									"    pm.expect(response.proveedor).to.have.property('direccion');",
									"    pm.expect(response).to.have.property('categoria');",
									"    pm.expect(response.categoria).to.have.property('nombre');",
									"    console.log('üè¢ Proveedor:', response.proveedor.nombre);",
									"    console.log('ü©∫ Categor√≠a:', response.categoria.nombre);",
									"});",
									"",
									"pm.test('Datos generales del producto v√°lidos', function () {",
									"    const response = pm.response.json();",
									"    pm.expect(response).to.have.property('precio');",
									"    pm.expect(response).to.have.property('stock');",
									"    pm.expect(response).to.have.property('requiere_cadena_frio');",
									"    pm.expect(response.precio).to.be.a('number');",
									"    pm.expect(response.stock).to.be.a('number');",
									"    pm.expect(response.requiere_cadena_frio).to.be.a('boolean');",
									"    console.log('üí≤ Precio:', response.precio, '| Stock total:', response.stock);",
									"});",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_logistica}}/api/bodegas/producto/{{producto_inventario_id}}/ubicaciones",
							"host": [
								"{{base_url_logistica}}"
							],
							"path": [
								"api",
								"bodegas",
								"producto",
								"{{producto_inventario_id}}",
								"ubicaciones"
							]
						},
						"description": "Obtiene todas las ubicaciones de un producto espec√≠fico en todas las bodegas"
					},
					"response": []
				}
			],
			"description": "Gestionar bodegas y consultar ubicaciones de productos"
		},
		{
			"name": "üöö 9. Consultar Entregas",
			"item": [
				{
					"name": "Obtener Todas las Entregas",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Entregas obtenidas exitosamente', function () {",
									"    pm.response.to.have.status(200);",
									"    const responseJson = pm.response.json();",
									"    const items = responseJson.items || (Array.isArray(responseJson) ? responseJson : []);",
									"    pm.expect(items).to.be.an('array');",
									"    console.log('Total de entregas:', items.length);",
									"});",
									"",
									"if (pm.response.code === 200) {",
									"    const responseJson = pm.response.json();",
									"    const items = responseJson.items || (Array.isArray(responseJson) ? responseJson : []);",
									"    ",
									"    if (items.length > 0) {",
									"        const entregaConfirmada = items.find(e => {",
									"            const pedido = e.pedido || {};",
									"            return pedido.estado === 'confirmado';",
									"        });",
									"        ",
									"        const entregaSeleccionada = entregaConfirmada || items[0];",
									"        const entregaId = entregaSeleccionada.id;",
									"        const fechaEntrega = entregaSeleccionada.fecha_entrega;",
									"        ",
									"        if (entregaId) {",
									"            pm.environment.set('entrega_id', String(entregaId));",
									"            console.log('Entrega ID guardada:', entregaId);",
									"            ",
									"            if (fechaEntrega) {",
									"                const fechaObj = new Date(fechaEntrega);",
									"                const year = fechaObj.getFullYear();",
									"                const month = String(fechaObj.getMonth() + 1).padStart(2, '0');",
									"                const day = String(fechaObj.getDate()).padStart(2, '0');",
									"                const fechaRuta = `${year}-${month}-${day}`;",
									"                pm.environment.set('fecha_ruta', fechaRuta);",
									"                console.log('Fecha de ruta guardada:', fechaRuta);",
									"            }",
									"        } else {",
									"            console.log('Advertencia: No se pudo obtener el ID de la entrega');",
									"        }",
									"    } else {",
									"        console.log('Advertencia: No hay entregas disponibles');",
									"    }",
									"}"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_logistica}}/api/entregas/",
							"host": [
								"{{base_url_logistica}}"
							],
							"path": [
								"api",
								"entregas",
								""
							]
						},
						"description": "Obtiene la lista de todas las entregas programadas"
					},
					"response": []
				},
				{
					"name": "Obtener Entregas por Rango de Fechas",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Entregas por rango de fechas obtenidas exitosamente', function () {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json().items;",
									"    pm.expect(response).to.be.an('array');",
									"    console.log('Entregas en el rango de fechas:', response.length);",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_logistica}}/api/entregas?fecha_inicio=2025-10-13&fecha_fin=2026-10-17",
							"host": [
								"{{base_url_logistica}}"
							],
							"path": [
								"api",
								"entregas"
							],
							"query": [
								{
									"key": "fecha_inicio",
									"value": "2025-10-13",
									"description": "Fecha de inicio del rango (YYYY-MM-DD)"
								},
								{
									"key": "fecha_fin",
									"value": "2026-10-17",
									"description": "Fecha de fin del rango (YYYY-MM-DD)"
								}
							]
						},
						"description": "Obtiene las entregas programadas en un rango de fechas espec√≠fico"
					},
					"response": []
				},
				{
					"name": "Obtener Entregas por Estado de Pedido",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Entregas por estado obtenidas exitosamente', function () {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json().items;",
									"    pm.expect(response).to.be.an('array');",
									"    console.log('Entregas con el estado indicado:', response.length);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_logistica}}/api/entregas?estado_pedido=confirmado",
							"host": [
								"{{base_url_logistica}}"
							],
							"path": [
								"api",
								"entregas"
							],
							"query": [
								{
									"key": "estado_pedido",
									"value": "confirmado",
									"description": "Filtra por estado del pedido (confirmado, entregado, etc.)"
								}
							]
						},
						"description": "Lista entregas filtradas por el estado del pedido asociado"
					},
					"response": []
				},
				{
					"name": "Obtener Entregas por Asignaci√≥n de Ruta",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Entregas filtradas por asignaci√≥n de ruta obtenidas exitosamente', function () {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json().items;",
									"    pm.expect(response).to.be.an('array');",
									"    console.log('Entregas filtradas por ruta:', response.length);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_logistica}}/api/entregas?con_ruta=true",
							"host": [
								"{{base_url_logistica}}"
							],
							"path": [
								"api",
								"entregas"
							],
							"query": [
								{
									"key": "con_ruta",
									"value": "true",
									"description": "true devuelve entregas asignadas a una ruta; false, entregas sin ruta"
								}
							]
						},
						"description": "Ejemplo de uso del par√°metro con_ruta para filtrar entregas por asignaci√≥n a ruta"
					},
					"response": []
				}
			],
			"description": "Consultar entregas programadas con filtros disponibles"
		},
		{
			"name": "üìä 10. Informes de ventas",
			"item": [
				{
					"name": "Listar datos informe de ventas",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_ventas}}/api/informes/ventas",
							"host": [
								"{{base_url_ventas}}"
							],
							"path": [
								"api",
								"informes",
								"ventas"
							]
						}
					},
					"response": []
				},
				{
					"name": "Listar datos informe por vendedor",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_ventas}}/api/informes/ventas?vendedor_id={{vendedor_id}",
							"host": [
								"{{base_url_ventas}}"
							],
							"path": [
								"api",
								"informes",
								"ventas"
							],
							"query": [
								{
									"key": "vendedor_id",
									"value": "{{vendedor_id}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Listar datos informe rango de fechas",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_ventas}}/api/informes/ventas?vendedor_id={{vendedor_id}}&fecha_inicio=2025-09-01T00:00:00&fecha_fin=2025-10-31T23:59:59",
							"host": [
								"{{base_url_ventas}}"
							],
							"path": [
								"api",
								"informes",
								"ventas"
							],
							"query": [
								{
									"key": "vendedor_id",
									"value": "{{vendedor_id}}"
								},
								{
									"key": "fecha_inicio",
									"value": "2025-09-01T00:00:00"
								},
								{
									"key": "fecha_fin",
									"value": "2025-10-31T23:59:59"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "üöõ 10. Gestionar Rutas",
			"item": [
				{
					"name": "Crear Ruta",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"if (!pm.environment.get('fecha_ruta')) {",
									"    const today = new Date();",
									"    const futureDate = new Date(today);",
									"    futureDate.setDate(today.getDate() + 1);",
									"    const year = futureDate.getFullYear();",
									"    const month = String(futureDate.getMonth() + 1).padStart(2, '0');",
									"    const day = String(futureDate.getDate()).padStart(2, '0');",
									"    const fechaRuta = `${year}-${month}-${day}`;",
									"    pm.environment.set('fecha_ruta', fechaRuta);",
									"    console.log('Fecha de ruta calculada (fallback):', fechaRuta);",
									"}",
									"",
									"if (!pm.environment.get('entrega_id')) {",
									"    console.log('Advertencia: La variable entrega_id no est√° definida. Ejecuta primero \"Obtener Todas las Entregas\" para obtener un ID de entrega.');",
									"}"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Ruta creada exitosamente', function () {",
									"    pm.response.to.have.status(201);",
									"    const response = pm.response.json();",
									"    pm.expect(response).to.have.property('id');",
									"    console.log('Ruta creada:', response.id);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"fecha_ruta\": \"{{fecha_ruta}}\",\n    \"repartidor_id\": \"{{repartidor_id}}\",\n    \"bodega_id\": \"{{bodega_id}}\",\n    \"entregas\": [\n        \"{{entrega_id}}\"\n    ]\n}"
						},
						"url": {
							"raw": "{{base_url_logistica}}/api/rutas/",
							"host": [
								"{{base_url_logistica}}"
							],
							"path": [
								"api",
								"rutas",
								""
							]
						},
						"description": "Crea una ruta en estado pendiente asignando entregas confirmadas a un repartidor"
					},
					"response": []
				},
				{
					"name": "Obtener Rutas",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Rutas obtenidas exitosamente', function () {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json();",
									"    pm.expect(response).to.be.an('array');",
									"    console.log('Total de rutas:', response.length);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_logistica}}/api/rutas?fecha=2025-11-10&repartidor_id={{repartidor_id}}",
							"host": [
								"{{base_url_logistica}}"
							],
							"path": [
								"api",
								"rutas"
							],
							"query": [
								{
									"key": "fecha",
									"value": "2025-11-10",
									"description": "Fecha de la ruta (YYYY-MM-DD)"
								},
								{
									"key": "repartidor_id",
									"value": "{{repartidor_id}}",
									"description": "Filtro opcional por repartidor"
								}
							]
						},
						"description": "Obtiene rutas seg√∫n fecha y/o repartidor asignado"
					},
					"response": []
				},
				{
					"name": "Obtener Rutas por Repartidor",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Rutas por repartidor obtenidas exitosamente', function () {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json();",
									"    pm.expect(response).to.be.an('array');",
									"    console.log('Rutas del repartidor:', response.length);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_logistica}}/api/rutas/repartidor/{{repartidor_id}}?fecha=2025-11-10",
							"host": [
								"{{base_url_logistica}}"
							],
							"path": [
								"api",
								"rutas",
								"repartidor",
								"{{repartidor_id}}"
							],
							"query": [
								{
									"key": "fecha",
									"value": "2025-11-10",
									"description": "Filtro opcional por fecha (YYYY-MM-DD)"
								}
							]
						},
						"description": "Lista rutas asignadas a un repartidor espec√≠fico"
					},
					"response": []
				}
			],
			"description": "Gestionar rutas y consultar asignaciones"
		},
		{
			"name": "üìä 11. Informes de ventas",
			"item": [
				{
					"name": "Listar datos informe de ventas",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_ventas}}/api/informes/ventas",
							"host": [
								"{{base_url_ventas}}"
							],
							"path": [
								"api",
								"informes",
								"ventas"
							]
						}
					},
					"response": []
				},
				{
					"name": "Listar datos informe por vendedor",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_ventas}}/api/informes/ventas?vendedor_id={{vendedor_id}",
							"host": [
								"{{base_url_ventas}}"
							],
							"path": [
								"api",
								"informes",
								"ventas"
							],
							"query": [
								{
									"key": "vendedor_id",
									"value": "{{vendedor_id}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Listar datos informe rango de fechas",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_ventas}}/api/informes/ventas?vendedor_id={{vendedor_id}}&fecha_inicio=2025-09-01T00:00:00&fecha_fin=2025-10-31T23:59:59",
							"host": [
								"{{base_url_ventas}}"
							],
							"path": [
								"api",
								"informes",
								"ventas"
							],
							"query": [
								{
									"key": "vendedor_id",
									"value": "{{vendedor_id}}"
								},
								{
									"key": "fecha_inicio",
									"value": "2025-09-01T00:00:00"
								},
								{
									"key": "fecha_fin",
									"value": "2025-10-31T23:59:59"
								}
							]
						}
					},
					"response": []
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8080",
			"description": {
				"content": "Nginx Gateway - Punto de entrada principal",
				"type": "text/plain"
			}
		},
		{
			"key": "base_url_auth",
			"value": "http://localhost:8080/auth",
			"description": {
				"content": "Auth-Service via Gateway",
				"type": "text/plain"
			}
		},
		{
			"key": "base_url_usuarios",
			"value": "http://localhost:8080/usuarios",
			"description": {
				"content": "Usuarios via Gateway",
				"type": "text/plain"
			}
		},
		{
			"key": "base_url_productos",
			"value": "http://localhost:8080/productos",
			"description": {
				"content": "Productos via Gateway",
				"type": "text/plain"
			}
		},
		{
			"key": "base_url_ventas",
			"value": "http://localhost:8080/ventas",
			"description": {
				"content": "Ventas via Gateway",
				"type": "text/plain"
			}
		},
		{
			"key": "base_url_logistica",
			"value": "http://localhost:8080/logistica",
			"description": {
				"content": "Log√≠stica via Gateway",
				"type": "text/plain"
			}
		},
		{
			"key": "proveedor_id",
			"value": ""
		},
		{
			"key": "categoria_id",
			"value": ""
		},
		{
			"key": "vendedor_id",
			"value": ""
		},
		{
			"key": "cliente_id",
			"value": ""
		},
		{
			"key": "producto_basico_id",
			"value": ""
		},
		{
			"key": "producto_inventario_id",
			"value": ""
		},
		{
			"key": "visita_id",
			"value": ""
		},
		{
			"key": "pedido_id",
			"value": ""
		},
		{
			"key": "bodega_id",
			"value": ""
		},
		{
			"key": "pedido_completo_id",
			"value": ""
		},
		{
			"key": "bodega_0_id",
			"value": ""
		},
		{
			"key": "bodega_0_nombre",
			"value": ""
		},
		{
			"key": "bodega_1_id",
			"value": ""
		},
		{
			"key": "bodega_1_nombre",
			"value": ""
		},
		{
			"key": "bodega_2_id",
			"value": ""
		},
		{
			"key": "bodega_2_nombre",
			"value": ""
		},
		{
			"key": "bodega_id_ejemplo",
			"value": ""
		},
		{
			"key": "bodega_3_id",
			"value": ""
		},
		{
			"key": "bodega_3_nombre",
			"value": ""
		},
		{
			"key": "access_token",
			"value": ""
		},
		{
			"key": "vendedor_auth_id",
			"value": ""
		},
		{
			"key": "cliente_auth_id",
			"value": ""
		},
		{
			"key": "proveedor_auth_id",
			"value": ""
		},
		{
			"key": "admin_id",
			"value": ""
		},
		{
			"key": "admin_token",
			"value": ""
		}
	]
}